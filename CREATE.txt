CREATE TABLE "CATEGORY"(
ID int NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
NAME varchar(45) NOT NULL,
TAGS varchar(45))

CREATE UNIQUE INDEX SQL_CATEGORY_ID_INDEX ON "CATEGORY"(ID)

CREATE TABLE "PERSON"(
ID int NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
FIRSTNAME varchar(50) NOT NULL, 
LASTNAME varchar(100) NOT NULL, 
EMAIL varchar(45) NOT NULL UNIQUE, 
ADDRESS varchar(45) NOT NULL, 
CITY varchar(45) NOT NULL, 
PASSWORD varchar(100), 
DTYPE varchar(31))

CREATE UNIQUE INDEX SQL_PERSON_EMAIL_INDEX ON "PERSON"(EMAIL)
CREATE UNIQUE INDEX SQL_PERSON_ID_INDEX ON "PERSON"(ID)

CREATE TABLE "PERSON_GROUPS"(
GROUPS_NAME varchar(45) NOT NULL,
DESCRIPTION varchar(45) NOT NULL)

CREATE INDEX SQL_PERSONGROUPS_EMAIL_INDEX ON "PERSON_GROUPS"(PERSON_EMAIL)
CREATE INDEX SQL_PERSONGROUPS_NAME_INDEX ON "PERSON_GROUPS"(GROUPS_NAME)

CREATE TABLE "ORDER_STATUS"(
ID int NOT NULL PRIMARY KEY, 
STATUS varchar(45) NOT NULL, 
DESCRIPTION varchar(200))

CREATE UNIQUE INDEX SQL_ORDERSTATUS_ID_INDEX ON "ORDER_STATUS"(ID)

CREATE TABLE "CUSTOMER_ORDER"(
ID int NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
AMOUNT float(52) NOT NULL, 
DATE_CREATED timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL, 
CUSTOMER_ID int NOT NULL, 
STATUS_ID int NOT NULL)

ALTER TABLE "CUSTOMER_ORDER" ADD CONSTRAINT FK_CUSTOMER_ORDER_ORDER_STATUS1 FOREIGN KEY (STATUS_ID) REFERENCES "ORDER_STATUS"(ID)
ALTER TABLE "CUSTOMER_ORDER" ADD CONSTRAINT FK_CUSTOMER_ORDER_CUSTOMER1 FOREIGN KEY (CUSTOMER_ID) REFERENCES "PERSON"(ID)

CREATE INDEX SQL_ORDER_STATUS_ID_INDEX ON "CUSTOMER_ORDER"(STATUS_ID)
CREATE INDEX SQL_ORDER_CUSTOMER_ID_INDEX ON "CUSTOMER_ORDER"(CUSTOMER_ID)
CREATE UNIQUE INDEX SQL_ORDER_ID_INDEX ON "CUSTOMER_ORDER"(ID)

CREATE TABLE "PRODUCT"(
ID int NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), 
NAME varchar(10000) NOT NULL, 
PRICE decimal(10,2) NOT NULL, 
DESCRIPTION varchar(10000) NOT NULL, 
IMG varchar(45), 
CATEGORY_ID int NOT NULL, 
IMG_SRC blob(1073741823))

ALTER TABLE "PRODUCT" ADD CONSTRAINT FK_PRODUCT_CATEGORY FOREIGN KEY (CATEGORY_ID) REFERENCES "CATEGORY"(ID)

CREATE UNIQUE INDEX SQL_PRODUCT_ID_INDEX ON "PRODUCT"(ID)
CREATE INDEX SQL_PRODUCT_CATEGORY ON "PRODUCT" ("CATEGORY_ID")

CREATE TABLE "ORDER_DETAIL"(
ORDER_ID int NOT NULL, 
PRODUCT_ID int NOT NULL, 
QTY int NOT NULL, 
CONSTRAINT SQL_ORDER_PRODUCT_PK PRIMARY KEY (ORDER_ID,PRODUCT_ID))

ALTER TABLE "ORDER_DETAIL" ADD CONSTRAINT FK_ORDER_DETAIL_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES "PRODUCT"(ID)
ALTER TABLE "ORDER_DETAIL" ADD CONSTRAINT FK_ORDER_DETAIL_ORDER FOREIGN KEY (ORDER_ID) REFERENCES "CUSTOMER_ORDER"(ID)

CREATE UNIQUE INDEX SQL_ORDER_DETAIL_INDEX ON "ORDER_DETAIL"(ORDER_ID, PRODUCT_ID)
CREATE INDEX SQL_ORDER_PRODUCT_ID_INDEX ON "ORDER_DETAIL"(PRODUCT_ID)
CREATE INDEX SQL_ORDER_DETAIL_ID_INDEX ON "ORDER_DETAIL"(ORDER_ID)

INSERT INTO "CATEGORY" (NAME,TAGS) VALUES ('Category I','Laptops')
INSERT INTO "CATEGORY" (NAME,TAGS) VALUES ('Category II','Monitors')
INSERT INTO "CATEGORY" (NAME,TAGS) VALUES ('Category III','Tablets')
INSERT INTO "CATEGORY" (NAME,TAGS) VALUES ('Category IV','Accessories')

INSERT INTO "PERSON" (FIRSTNAME,LASTNAME,EMAIL,ADDRESS,CITY,PASSWORD,DTYPE) VALUES ('User','User','user@example.com','','','81dc9bdb52d04dc20036dbd8313ed055','Customer')
INSERT INTO "PERSON" (FIRSTNAME,LASTNAME,EMAIL,ADDRESS,CITY,PASSWORD,DTYPE) VALUES ('Administrator','Administrator','admin@example.com','','','81dc9bdb52d04dc20036dbd8313ed055','Administrator')

INSERT INTO "PERSON_GROUPS" (GROUPS_NAME, DESCRIPTION) VALUES ('USERS', 'Użytkownicy/Klienci')
INSERT INTO "PERSON_GROUPS" (GROUPS_NAME, DESCRIPTION) VALUES ('ADMINS', 'Administratory')

INSERT INTO "ORDER_STATUS" (ID,STATUS,DESCRIPTION) VALUES (1,'Oczekujące na przetwarzanie','')
INSERT INTO "ORDER_STATUS" (ID,STATUS,DESCRIPTION) VALUES (2,'Weryfikacja płatności','')
INSERT INTO "ORDER_STATUS" (ID,STATUS,DESCRIPTION) VALUES (3,'Zamówienie jest przygotowywane do wysyłki','Płatność została potwierdzona')
INSERT INTO "ORDER_STATUS" (ID,STATUS,DESCRIPTION) VALUES (4,'Zamówienie zostało wysłane', 'Oczekuj dostawy w ciągu miesiąca')
INSERT INTO "ORDER_STATUS" (ID,STATUS,DESCRIPTION) VALUES (5,'Zamówienie anulowane','Płatność nie powiodła się')
INSERT INTO "ORDER_STATUS" (ID,STATUS,DESCRIPTION) VALUES (6,'Zamówienie anulowane','Anulowane przez administratora')

INSERT INTO "PRODUCT" (NAME,PRICE,DESCRIPTION,IMG,CATEGORY_ID,IMG_SRC) VALUES ('Produkt I',2500.00,'Laptop 1','picture.jpg',1, CAST (X'89504e470d' AS BLOB))
INSERT INTO "PRODUCT" (NAME,PRICE,DESCRIPTION,IMG,CATEGORY_ID,IMG_SRC) VALUES ('Produkt II',1650.90,'Monitor 1','picture.jpg',2, CAST (X'89504e470d' AS BLOB))
INSERT INTO "PRODUCT" (NAME,PRICE,DESCRIPTION,IMG,CATEGORY_ID,IMG_SRC) VALUES ('Produkt III',875.50,'Tablet 1','picture.jpg',3, CAST (X'89504e470d' AS BLOB))
